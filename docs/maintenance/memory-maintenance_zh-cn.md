# 记忆维护指南

系统性维护 MCP Memory Service 知识库的实用手册，涵盖排查、分析、重打标签与记录流程。

## 🎯 概述

定期维护可保持知识库结构化、可检索、长期有价值。本指南提供可复制的维护工作流，帮助识别并修整标签缺失或结构不良的记忆。

## 📋 快速开始

1. 搜索未打标签记忆：`retrieve_memory({"query": "untagged memories", "n_results": 20})`
2. 分析内容主题：项目、技术、活动、状态；
3. 套用标准标签；
4. 创建带标签的新记忆并删除旧条目；
5. 记录维护日志。

建议节奏：每周回顾近 7 天记忆、每月全面检查、每季度做健康体检。

## 🔍 分阶段流程

### Phase 1：评估
- `check_database_health()` 了解健康度、总量、指标；
- 使用多种查询抓取未打标签或标签薄弱的记忆；
- 按优先级（关键项目/近期记忆/历史参考）分类。

### Phase 2：分析
- 确认项目上下文、技术栈、活动类型、内容形态、状态；
- 为常见场景设定标签模式（项目 + 技术 + 活动 + 内容类型 + 状态）。

### Phase 3：实施
```javascript
store_memory({...})  // 写入新记忆
delete_memory({"content_hash": "旧哈希"})
```
- 每处理一条：复制原内容→新建记忆→确认成功→删除旧条目→记录。

### Phase 4：验证与记录
- 检查新记忆是否可检索；
- 运行健康检测；
- `store_memory` 写入维护总结，包含数量、耗时、标签策略与后续行动。

## 🛠️ 常见场景

- **测试记忆清理**：区分有价值的测试与可删除的占位条目；
- **项目文档整理**：按项目阶段/时间线/状态组织；
- **技术方案归档**：根据问题域、技术栈、解决状态标注。

## 工具与模板
- 查询助手：多种 `retrieve_memory`/`recall_memory` 组合；
- 标签模板：测试类、文档类、概念类等预设模式；
- 批处理建议：分组处理、统一模式、质量复核。

## 监控指标
- 标记率、检索相关度、定位时间；
- 每次维护的处理量、耗时、改进点；
- 月度/季度趋势、用户满意度等。

## 维护计划
- **每周 15-30 分钟**：快速整理近期记忆；
- **每月 1-2 小时**：完整回顾 + Spot Check；
- **每季度 2-4 小时**：全面优化、备份与策略复盘。

## 最佳实践
- ✅ 小步快跑、保持一致、记录决策、专注高价值；
- ❌ 不要匆忙操作、不要修改原文、删除前确保备份、疲劳时暂停。

## 进阶技巧
- 结合语义搜索建议标签；
- 利用标签共现分析整理模板；
- 与外部工具联动（项目管理、知识图谱）；
- 生成自动化维护脚本或定期报告。

---

持续维护可让 MCP Memory Service 成为结构化、易查询的知识资产库。照此流程操作，可将零散信息转化为可复用、可扩展的知识体系。
